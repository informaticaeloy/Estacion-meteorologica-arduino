<!DOCTYPE html>
<html>
<head>
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<meta charset="utf-8" />
<title>Demo Arduino Ethernet</title>

<style type="text/css">
td
{
font: small-caps 900 50px consolas
}
</style>



<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script type="text/javascript">
//function actualizar(){location.reload(true);}
setInterval("cargarDatos()",1000);
</script>


<script type="text/javascript">
function cargarDatos()
{
	// En la linea siguiente cambia la IP por la que est√© usando tu arduino
	var json = $.getJSON("http://192.168.1.20");
	$.when(json).then(function(datos){
		$("#tempVal").text(datos.Temperatura);
		var myCO2 = datos.CO2;
		//alert(myCO2);
		$("#humeVal").text(datos.Humedad);
		$("#presVal").text(datos.Presion);
		$("#CO2Val").text(datos.CO2);
		$("#VOCVal").text(datos.VOC);
		$("#uptimeVal").text(datos.uptime);
		var objetivo = document.getElementById('texto_nav1');
		if (myCO2 < 501)
		{
			objetivo.innerHTML = "Ambiente muy bueno, recomendado";
		}
		else if (myCO2 < 1001)
		{
			objetivo.innerHTML = "Ambiente Bueno";
		}
		else if (myCO2 < 1501)
		{
			objetivo.innerHTML = "Ambiente Malo, ventilar";
		}
		else if (myCO2 < 2001)
		{
			objetivo.innerHTML = "Ambiente Muy Malo, VENTILAR !!!";
		}
		else
		{
			objetivo.innerHTML = "Ambiente Peligroso, DESALOJAR !!!";
		}
	});
}
</script>

</head><body onLoad="cargarDatos();">
<div>
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width: 100%;">
	<tbody>
		<tr>
			<td colspan="3" rowspan="1" align="center" style="width: 50%;">CO2</td>
			<td colspan="3" rowspan="1" align="center" style="width: 50%;">VOC</td>
		</tr>
		<tr>
			<td colspan="3" rowspan="1" align="center"><span id="CO2Val"></span>ppm</td>
			<td colspan="3" rowspan="1" align="center"><span id="VOCVal"></span>ppb</td>
		</tr>
		<tr>
			<td colspan="3" rowspan="1"><span id="texto_nav1"></span></td>
			<td colspan="3" rowspan="1">&nbsp;</td>
		</tr>
		<tr>
			<td colspan="2" rowspan="1" align="center" style="width: 33%;">Temperatura</td>
			<td colspan="2" rowspan="1" align="center" style="width: 33%;">Humedad</td>
			<td colspan="2" rowspan="1" align="center" style="width: 33%;">Presi&oacute;n</td>
		</tr>
		<tr>
			<td colspan="2" rowspan="1" align="center"><span id="tempVal"></span>&#176;C</td>
			<td colspan="2" rowspan="1" align="center"><span id="humeVal"></span>%</td>
			<td colspan="2" rowspan="1" align="center"><span id="presVal"></span>hPa</td>
		</tr>
		<tr>
			<td colspan="6" align="center">Dpto. IT - Sensor ambiental - Uptime:<span id="uptimeVal"></span>ms</td>
		</tr>
	</tbody>
</table>

<p>&nbsp;</p>

</div>
</body>
</html>